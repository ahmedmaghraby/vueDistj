(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64cd9e2c"],{"002b":function(t,e,i){},"1f93":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contanier"},[t.showInv?i("div",{staticClass:"row"},[i("invoicesBuy-Table",{staticClass:"flex md12 sm12 xs12",attrs:{CustomerId:t.currentCustomer}})],1):t._e(),t.showInv?t._e():i("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[i("va-card",{staticClass:"flex md8 sm12 xs12",attrs:{title:t.$t("tables.labelCutomerChoose")}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.okCreatefun()}}},[i("div",{staticClass:"row flex-center"},[i("div",{staticClass:"flex md4 sm12 xs12 px-1"},[i("va-select",{attrs:{label:t.$t("placeholder.CustomerName"),required:"",searchable:"",textBy:"name",keyBy:"id",options:t.fKCustomer.options,disabled:""!==t.fKCustomer.valuePhone},model:{value:t.fKCustomer.valueName,callback:function(e){t.$set(t.fKCustomer,"valueName",e)},expression:"fKCustomer.valueName"}})],1),i("div",{staticClass:"flex md4 sm12 xs12 px-1"},[i("va-select",{attrs:{label:t.$t("placeholder.CustomerPhone"),required:"",searchable:"",textBy:"phone",keyBy:"id",options:t.fKCustomer.options,disabled:""!==t.fKCustomer.valueName},model:{value:t.fKCustomer.valuePhone,callback:function(e){t.$set(t.fKCustomer,"valuePhone",e)},expression:"fKCustomer.valuePhone"}})],1)]),i("div",{staticClass:"d-flex justify--center mt-3"},[i("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t("modal.ok"))+" ")])],1)])])],1)])},a=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid row"},[t.loading?i("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"flex-center spinner-box"},[i("SpringSpinner",{attrs:{"animation-duration":1500,color:this.$themes.primary,size:80}})],1)]):t._e(),t.loading?t._e():i("div",{staticClass:"row"},[i("a",{style:t.floatingbtncomputedStyle(),on:{click:t.showsubmitModdal}},[i("i",{staticClass:"fa fa-plus my-float"})]),i("div",{staticClass:"flex xs12 md6 "},[i("va-input",{attrs:{value:t.searchBarCodeTerm,placeholder:t.$t("tables.searchByBarCode"),removable:""},on:{input:t.searchBarcode}},[i("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1),i("va-card",{attrs:{title:t.$t("tables.labelBillItems")}},[i("va-data-table",{staticClass:"data-table-infinite-scroll--container",attrs:{fields:t.fields,data:t.tableItems,"no-pagination":""},scopedSlots:t._u([{key:"marker",fn:function(e){return[t._v(" "+t._s(e.rowIndex+1)+" ")]}},{key:"actions",fn:function(e){return[i("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"gray"},on:{click:function(i){return t.showEditModal(e.rowData)}}},[t._v(" "+t._s(t.$t("tables.edit"))+" ")]),i("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"danger"},on:{click:function(i){return t.showDeleteModal(e.rowIndex)}}},[t._v(" "+t._s(t.$t("tables.delete"))+" ")])]}}],null,!1,3906942265)}),i("div",{staticClass:"row "},[i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.totalBilWithoutTax")))]),i("p",[t._v(" "+t._s(t.totalBilWithoutTax)+" ")])]),i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.totalTax")))]),i("p",[t._v(" "+t._s(t.totalTax)+" ")])]),i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.totalBilTax")))]),i("p",[t._v(" "+t._s(t.totalBilTax)+" ")])])])],1)],1),i("div",{staticClass:"flex md6 xs12"},[i("va-input",{attrs:{value:t.searchNameTerm,placeholder:t.$t("tables.searchByName"),removable:""},on:{input:t.search}},[i("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1),i("va-card",{staticClass:"Card-infinite-scroll--container",attrs:{title:t.$t("tables.labelGroups")}},[t.groupsLevels.length>=1?i("div",{staticClass:"row"},t._l(t.groupsLevels,(function(e,r){return i("div",{key:r,staticClass:"d-flex flex xs12 lg12 border-bottom"},t._l(e,(function(a,s){return i("div",{key:s,staticClass:" clickable flex xs6 lg4",on:{click:function(i){return t.getProductByGroupId(e[s],r)}}},[i("div",{staticClass:"grid__container flex-center",style:t.computedStyle(25,1)},[i("div",{staticClass:"ma-2 text-center"},[i("p",{staticClass:"display-5"},[t._v(t._s(a.name))])])])])})),0)})),0):t.groupsLevels.length>=1?t._e():i("div",{staticClass:"row"},[i("div",{staticClass:"flex xs12 lg12"},[i("div",{staticClass:"textCenter"},[t._v(" "+t._s(t.$t("tables.noDataAvailable"))+" ")])])])]),t.showGroupProduct?t._e():i("va-card",{staticClass:"mt-3 Card-infinite-scroll--container",attrs:{title:t.$t("tables.labelBestSellProduct")}},[t.dataTable.bestSellProducts.length>=1?i("div",{staticClass:"row"},t._l(t.dataTable.bestSellProducts,(function(e,r){return i("div",{key:r,staticClass:"clickable flex xs6 lg4",on:{click:function(e){return t.addProduct(t.dataTable.bestSellProducts[r])}}},[i("div",{staticClass:"grid__container flex-center",style:t.computedStyle(e.avilableInStock,e.minQtyStock)},[i("div",{staticClass:"mt-2 text-center"},[i("p",{staticClass:"display-5"},[t._v(t._s(e.name))]),i("p",[t._v(t._s(e.price)+"$")])])])])})),0):t.dataTable.bestSellProducts.length>=1?t._e():i("div",{staticClass:"row"},[i("div",{staticClass:"flex xs12 lg12"},[i("div",{staticClass:"textCenter"},[t._v(" "+t._s(t.$t("tables.noDataAvailable"))+" ")])])])]),t.showGroupProduct?i("va-card",{staticClass:"mt-3 Card-infinite-scroll--container",attrs:{title:t.$t("tables.labelProductGroup")}},[i("va-button",{staticClass:"ml-0",attrs:{slot:"actions",icon:"fa fa-close",flat:"",color:"danger"},on:{click:function(e){return t.ShowBestSellProductAgain()}},slot:"actions"}),t.groupProduct.length>=1?i("div",{staticClass:"row"},t._l(t.groupProduct,(function(e,r){return i("div",{key:r,staticClass:"clickable flex xs6 lg4",on:{click:function(e){return t.addProduct(t.groupProduct[r])}}},[i("div",{staticClass:"grid__container flex-center",style:t.computedStyle(e.avilableInStock,e.minQtyStock)},[i("div",{staticClass:"mt-2 text-center"},[i("p",{staticClass:"display-5"},[t._v(t._s(e.name))]),i("p",[t._v(t._s(e.price?e.price:"---"))])])])])})),0):t.groupProduct.length>=1?t._e():i("div",{staticClass:"row"},[i("div",{staticClass:"flex xs12 lg12"},[i("div",{staticClass:"textCenter"},[t._v(" "+t._s(t.$t("tables.noDataAvailable"))+" ")])])])],1):t._e(),i("va-modal",{attrs:{"no-outside-dismiss":"",size:"large",title:t.$t(t.modelTitleProductprice),"hide-default-actions":""},model:{value:t.createModalProductPrice,callback:function(e){t.createModalProductPrice=e},expression:"createModalProductPrice"}},[i("form",{on:{submit:function(e){e.preventDefault(),t.editModalProductPrice?t.okEditfunProductPrice():t.okCreatefunProductPrice()}}},[i("div",{staticClass:"row flex-center"},[i("div",{staticClass:"flex md4 sm12 xs12 px-1"},[i("va-select",{attrs:{label:t.$t("placeholder.uints"),error:t.riquierdvalidation(t.UintAndPriceByCUstomer.valueUint),"error-messages":["error message"],required:"",searchable:"",textBy:"uint_Name",keyBy:"fk_Uint",options:t.UintAndPriceByCUstomer.options},model:{value:t.UintAndPriceByCUstomer.valueUint,callback:function(e){t.$set(t.UintAndPriceByCUstomer,"valueUint",e)},expression:"UintAndPriceByCUstomer.valueUint"}})],1),i("div",{staticClass:"flex md4 sm12 xs12 px-1"},[i("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.price"))+" ")]),i("va-input",{attrs:{type:"number",step:"0.5",min:void 0===t.UintAndPriceByCUstomer.valueUint.min_Sale_Price?0:t.UintAndPriceByCUstomer.valueUint.min_Sale_Price,max:void 0===t.UintAndPriceByCUstomer.valueUint.max_Sale_Price?"":t.UintAndPriceByCUstomer.valueUint.max_Sale_Price,"error-messages":t.$t("errorMessage.price"),placeholder:t.$t("placeholder.price"),required:""},model:{value:t.UintAndPriceByCUstomer.valuePrice,callback:function(e){t.$set(t.UintAndPriceByCUstomer,"valuePrice",e)},expression:"UintAndPriceByCUstomer.valuePrice"}})],1),i("div",{staticClass:"flex md4 sm12 xs12 px-1"},[i("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.quantity"))+" ")]),i("va-input",{attrs:{type:"number",step:"1",min:void 0===t.UintAndPriceByCUstomer.valueUint.min_Quantity?0:t.UintAndPriceByCUstomer.valueUint.min_Quantity,max:void 0!==t.UintAndPriceByCUstomer.valueUint.avilableInStock?t.UintAndPriceByCUstomer.valueUint.avilableInStock:"",error:t.numircriquierdvalidation(t.UintAndPriceByCUstomer.valueQuantaty,t.UintAndPriceByCUstomer.valueUint.min_Quantity),"error-messages":t.$t("errorMessage.Number"),placeholder:t.$t("placeholder.quantity"),required:""},model:{value:t.UintAndPriceByCUstomer.valueQuantaty,callback:function(e){t.$set(t.UintAndPriceByCUstomer,"valueQuantaty",e)},expression:"UintAndPriceByCUstomer.valueQuantaty"}})],1),i("div",{staticClass:"flex md12 sm12 xs12 px-1"},[i("p",[t._v(" "+t._s((t.UintAndPriceByCUstomer.valueUint.customerPrice>0?t.$t("placeholder.customerprice")+":"+t.UintAndPriceByCUstomer.valueUint.customerPrice:t.$t("placeholder.customerdidntbuy"))+" | "+t.$t("placeholder.AvarageBuyPrice")+":"+t.UintAndPriceByCUstomer.valueUint.avarage_Price_Inv_Count)+" ")])])]),i("div",{staticClass:"d-flex justify--center mt-3"},[i("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(e){t.editModalProductPrice?t.cancleEditfunProductPrice():t.cancleCreatefunProductPrice()}}},[t._v(" "+t._s(t.$t("modal.cancel"))+" ")]),i("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t(t.modelOktextProductprice)))])],1)])]),i("va-modal",{attrs:{"no-outside-dismiss":"",title:t.$t("generic.deleteItemTitle"),okText:t.$t("modal.delete"),cancelText:t.$t("modal.cancel"),message:t.$t("generic.deleteItemMsg")},on:{ok:function(e){return t.okDeletefun()},cancel:function(e){return t.cancleDeletefun()}},model:{value:t.deleteModal,callback:function(e){t.deleteModal=e},expression:"deleteModal"}}),i("va-modal",{attrs:{"no-outside-dismiss":"",size:"large",title:t.$t(t.modelTitleProductprice),"hide-default-actions":""},model:{value:t.submitModdal,callback:function(e){t.submitModdal=e},expression:"submitModdal"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.totalBilWithoutTax")))]),i("p",[t._v(" "+t._s(t.totalBilWithoutTax)+" ")])]),i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.totalTax")))]),i("p",[t._v(" "+t._s(t.totalTax)+" ")])]),i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.totalBilTax")))]),i("p",[t._v(" "+t._s(t.totalBilTax)+" ")])])]),i("form",{on:{submit:function(e){return e.preventDefault(),t.okSubmitfun()}}},[i("div",{staticClass:"row flex-center"},[i("div",{staticClass:"flex md6 sm12 xs12 px-1"},[i("va-date-picker",{attrs:{label:t.$t("placeholder.dueDate"),required:""},model:{value:t.ApiRequest.inv_dueDate,callback:function(e){t.$set(t.ApiRequest,"inv_dueDate",e)},expression:"ApiRequest.inv_dueDate"}})],1),i("div",{staticClass:"flex md6 sm12 xs12 px-1"},[i("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.notes"))+" ")]),i("va-input",{attrs:{placeholder:t.$t("placeholder.notes ")},model:{value:t.ApiRequest.notes,callback:function(e){t.$set(t.ApiRequest,"notes",e)},expression:"ApiRequest.notes "}})],1)]),i("div",{staticClass:"d-flex justify--center mt-3"},[i("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(e){return t.canclesubmitfun()}}},[t._v(" "+t._s(t.$t("modal.cancel"))+" ")]),i("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t(t.modelOktextProductprice)))])],1)])]),i("va-modal",{attrs:{"no-outside-dismiss":"","hide-default-actions":""},model:{value:t.countDownModdal,callback:function(e){t.countDownModdal=e},expression:"countDownModdal"}},[i("div",{staticClass:"row flex-center text-center",staticStyle:{width:"50vw"}},[i("div",{staticClass:"flex md4 xs12"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.invID")))]),i("p",[t._v(" "+t._s(t.invId)+" ")])])]),i("div",{staticClass:"row flex-center pt-5 text-center"},[i("div",{staticClass:"flex md4 xs12"},[i("p",[t._v(" "+t._s(t.countDown+t.$t("generic.seconed"))+" ")])])])])],1),i("div",{staticClass:"flex xs12 md6 "},[i("va-card",{staticClass:"customerData-infinite-scroll--container",attrs:{title:t.$t("tables.labelCustomerData")}},[i("div",{staticClass:"row customerData-infinite-scroll--container"},[i("div",{staticClass:"flex md6 xs6"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.currentBalance")))]),i("p",[t._v(" "+t._s(t.dataTable.user.currentBalance)+" ")])]),i("div",{staticClass:"flex md6 xs6"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.maxDepit")))]),i("p",[t._v(" "+t._s(t.dataTable.user.maxDepit)+" ")])]),i("div",{staticClass:"flex md6 xs6"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.is_vip")))]),i("p",[t._v(" "+t._s(t.dataTable.user.is_vip?"✔":"✘")+" ")])]),i("div",{staticClass:"flex md6 xs6"},[i("p",{staticClass:"display-5"},[t._v(t._s(t.$t("generic.notes")))]),i("p",[t._v(" "+t._s(t.dataTable.user.notes)+" ")])])])])],1)])])},n=[],o=i("a026"),c=i("4583"),l=i("c427");function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),t}var p=function(){function t(){u(this,t)}return m(t,[{key:"getNewBill",value:function(t,e){return l["a"].get("Bill/GetProductsByCustomer?id=".concat(t,"&Company_Activity=").concat(e))}},{key:"getUintAndPriceByCUstomer",value:function(t,e){return l["a"].get("Bill/GetProductUintAndPrice?productId=".concat(t,"&customerId=").concat(e))}},{key:"getAll",value:function(){return l["a"].get("Bill")}},{key:"getAllPagnation",value:function(t){return l["a"].get("Bill/GetAllPaging",{params:t})}},{key:"get",value:function(t){return l["a"].get("Bill?Id=".concat(t))}},{key:"create",value:function(t){return l["a"].post("Bill",t)}},{key:"update",value:function(t,e){return l["a"].put("Bill?Id=".concat(t),e)}},{key:"delete",value:function(t){return l["a"].delete("Bill?Id=".concat(t))}}]),t}(),v=new p,h=i("2ef0"),f=i("646b");function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var U={components:C({},c),props:{CustomerId:Number},data:function(){return{searchNameTerm:null,searchBarCodeTerm:null,stopBtn:!1,dataTable:[],loading:!0,showGroupProduct:!1,groupProduct:[],groupsLevels:[],modelTitleProductprice:"",modelOktextProductprice:"",createModalProductPrice:!1,editModalProductPrice:!1,deleteModal:!1,submitModdal:!1,countDownModdal:!1,UintAndPriceByCUstomer:{valueUint:"",valuePrice:0,valueQuantaty:1,currentproduct:"",options:[]},opjectBeforeEdit:{},cuurentIndex:"",currentobject:{},ApiRequest:{inv_Subs:[]},totalBilWithoutTax:0,totalBilTax:0,totalTax:0,tableItems:[],countDown:3,invId:0}},computed:{fields:function(){return[{name:"__slot:marker",width:"30px",dataClass:"text-center"},{name:"fullName",title:this.$t("tables.headings.name")},{name:"quantity",title:this.$t("tables.headings.quantity")},{name:"price",title:this.$t("tables.headings.price")},{name:"fullPrice",title:this.$t("tables.headings.fullPrice")},{name:"tax",title:this.$t("tables.headings.tax")},{name:"priceAfterTax",title:this.$t("tables.headings.priceAfterTax")},{name:"__slot:actions",dataClass:"text-right"}]}},watch:{"UintAndPriceByCUstomer.valueUint":function(t){this.UintAndPriceByCUstomer.valueUint!==t&&(this.UintAndPriceByCUstomer.valuePrice=t.price,this.UintAndPriceByCUstomer.valueQuantaty=t.min_Quantity)},tableItems:function(t){var e=this;this.totalBilWithoutTax=0,this.totalBilTax=0,this.totalTax=0,this.tableItems.forEach((function(t){e.totalBilWithoutTax=parseFloat(e.totalBilWithoutTax+t.fullPrice),e.totalBilTax=parseFloat(e.totalBilTax+t.priceAfterTax),e.totalTax=parseFloat(e.totalTax+t.tax)}))},searchNameTerm:function(t){var e=this;if(!this.searchNameTerm||this.searchNameTerm.length<1)return this.showGroupProduct=!1,this.groupProduct;this.showGroupProduct=!0,this.groupProduct=this.dataTable.allProducts.filter((function(t){return t.nameAr.toLowerCase().includes(e.searchNameTerm.toLowerCase())}))},searchBarCodeTerm:function(t){var e=this;if(!this.searchBarCodeTerm||this.searchBarCodeTerm.length<1)return this.showGroupProduct=!1,this.groupProduct;this.showGroupProduct=!0,this.groupProduct=this.dataTable.allProducts.filter((function(t){return null!==t.shortCutCode&&void 0!==t.shortCutCode&&t.shortCutCode.toLowerCase().includes(e.searchBarCodeTerm.toLowerCase())}))}},created:function(){this.getnew()},methods:{computedStyle:function(t,e){return t-10>e?{backgroundColor:this.$themes.primary}:t>e?{backgroundColor:this.$themes.gray}:{backgroundColor:this.$themes.danger}},floatingbtncomputedStyle:function(){return"eg"===o["a"].i18n.locale()||"ir"===o["a"].i18n.locale()?{position:"fixed",width:"60px",height:"60px",bottom:"23px",left:"23px","background-color":"#0C9",color:"#FFF","border-radius":"50px","text-align":"center","box-shadow":"2px 2px 3px #999","z-index":"100"}:{position:"fixed",width:"60px",height:"60px",bottom:"23px",right:"23px","background-color":"#0C9",color:"#FFF","border-radius":"50px","text-align":"center","box-shadow":"2px 2px 3px #999","z-index":"100"}},riquierdvalidation:function(t){return f["a"].riquierdvalidation(t)},search:Object(h["debounce"])((function(t){this.searchNameTerm=t}),500),searchBarcode:Object(h["debounce"])((function(t){this.searchBarCodeTerm=t}),500),numircriquierdvalidation:function(t){return f["a"].numircriquierdvalidation(t)},numircriquierdvalidationMin:function(t,e){return!!e&&!(t>=e)},numircriquierdvalidationMax:function(t,e){return!!e&&!(t<=e)},getnew:function(){var t=this;v.getNewBill(this.CustomerId,1).then((function(e){console.log(e.data),t.dataTable=e.data,t.groupsLevels.push(e.data.groups),t.loading=!1}),(function(e){console.error(e),t.loading=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-right",duration:1500,type:"error"})}))},getProductByGroupId:function(t,e){return this.groupProduct=this.dataTable.allProducts.filter((function(e){return null!==e.products_Groups&&e.products_Groups.id===t.id})),t.parentGroups.length>0?(this.groupsLevels.splice(e+1),this.groupsLevels.push(t.parentGroups)):this.groupsLevels.length>=e&&this.groupsLevels.splice(e+1),console.log("product",this.groupProduct),console.log("this.nextLevelGroup",this.groupsLevels),this.showGroupProduct=!0,this.groupProduct},ShowBestSellProductAgain:function(){this.showGroupProduct=!1},addProduct:function(t){var e=this;this.modelTitleProductprice="generic.creatItemTitle",this.modelOktextProductprice="modal.create",console.log(t),v.getUintAndPriceByCUstomer(t.id,this.CustomerId).then((function(i){if(console.log("getUintAndPriceByCUstomer",i.data),e.UintAndPriceByCUstomer.options=i.data,null!==t.fK_DeafultUnits){var r=e.UintAndPriceByCUstomer.options.find((function(e){return e.fk_Uint===t.fK_DeafultUnits}));null!==r&&void 0!==r?(e.UintAndPriceByCUstomer.valueUint=r,e.UintAndPriceByCUstomer.valuePrice=r.price,e.UintAndPriceByCUstomer.valueQuantaty=r.min_Quantity):(e.UintAndPriceByCUstomer.valueUint=e.UintAndPriceByCUstomer.options[0],e.UintAndPriceByCUstomer.valuePrice=e.UintAndPriceByCUstomer.options[0].price,e.UintAndPriceByCUstomer.valueQuantaty=e.UintAndPriceByCUstomer.options[0].min_Quantity)}e.UintAndPriceByCUstomer.currentproduct=t,e.createModalProductPrice=!0}),(function(t){console.error(t),e.loading=!1,e.showToast(e.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-right",duration:1500,type:"error"})}))},okCreatefunProductPrice:function(){var t=this;this.stopBtn=!0,console.log(this.UintAndPriceByCUstomer);var e={fullName:this.UintAndPriceByCUstomer.currentproduct.nameAr,quantity:this.UintAndPriceByCUstomer.valueQuantaty+"/"+this.UintAndPriceByCUstomer.valueUint.uint_Name,price:this.UintAndPriceByCUstomer.valuePrice,fullPrice:this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty,productToEdite:this.UintAndPriceByCUstomer,qu:this.UintAndPriceByCUstomer.valueQuantaty,productid:this.UintAndPriceByCUstomer.currentproduct.id,product:this.UintAndPriceByCUstomer.currentproduct,uintid:this.UintAndPriceByCUstomer.valueUint.fk_Uint,tax:(this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100*(this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty)).toFixed(2),taxValue:this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100,priceAfterTax:(this.UintAndPriceByCUstomer.currentproduct.taxGroup.valueHaveTax?this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty:this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty+(this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100===0?1:this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100)*(this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty)).toFixed(2),stockid:this.UintAndPriceByCUstomer.currentproduct.stock.id};this.UintAndPriceByCUstomer.currentproduct.taxGroup.valueHaveTax&&(e.fullPrice=(e.fullPrice-e.tax).toFixed(2));var i=this.tableItems.findIndex((function(e){return e.productid===t.UintAndPriceByCUstomer.currentproduct.id&&e.uintid===t.UintAndPriceByCUstomer.valueUint.fk_Uint}));if(-1!==i){var r=this.tableItems[i],a=e;a.quantity=e.qu+r.qu+"/"+r.productToEdite.valueUint.uint_Name,a.qu=e.qu+r.qu,a.fullPrice=e.price*(e.qu+r.qu),a.productToEdite.valueQuantaty=a.productToEdite.valueQuantaty+r.productToEdite.valueQuantaty,a.priceAfterTax=r.priceAfterTax+e.priceAfterTax,this.tableItems.splice(i,1,a)}else this.tableItems.push(e);this.createModalProductPrice=!1,this.UintAndPriceByCUstomer.valueUint="",this.UintAndPriceByCUstomer.currentproduct="",this.UintAndPriceByCUstomer.valuePrice=0,this.UintAndPriceByCUstomer.valueQuantaty=1,this.stopBtn=!1},cancleCreatefunProductPrice:function(){this.createModalProductPrice=!1,this.UintAndPriceByCUstomer.valueUint="",this.UintAndPriceByCUstomer.valuePrice=0,this.UintAndPriceByCUstomer.valueQuantaty=1},showDeleteModal:function(t){this.deleteModal=!0,this.cuurentIndex=t},okDeletefun:function(){this.tableItems.splice(this.cuurentIndex,1)},cancleDeletefun:function(){this.deleteModal=!1},showEditModal:function(t){this.editModalProductPrice=!0,this.modelTitle="generic.editItemTitle",this.modelOktext="modal.edit",this.createModalProductPrice=!0,this.opjectBeforeEdit=Object.assign({},t),this.UintAndPriceByCUstomer.valueUint=t.productToEdite.options.find((function(e){return e.fk_Uint===t.uintid})),this.UintAndPriceByCUstomer.valuePrice=t.price,this.UintAndPriceByCUstomer.valueQuantaty=t.qu,this.UintAndPriceByCUstomer.currentproduct=t.product},okEditfunProductPrice:function(){var t=this;this.stopBtn=!0;var e={fullName:this.UintAndPriceByCUstomer.currentproduct.nameAr,quantity:this.UintAndPriceByCUstomer.valueQuantaty+"/"+this.UintAndPriceByCUstomer.valueUint.uint_Name,price:this.UintAndPriceByCUstomer.valuePrice,fullPrice:this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty,productToEdite:this.UintAndPriceByCUstomer,qu:this.UintAndPriceByCUstomer.valueQuantaty,productid:this.UintAndPriceByCUstomer.currentproduct.id,product:this.UintAndPriceByCUstomer.currentproduct,uintid:this.UintAndPriceByCUstomer.valueUint.fk_Uint,tax:((this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100===0?1:this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100)*(this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty)).toFixed(2),priceAfterTax:(this.UintAndPriceByCUstomer.currentproduct.taxGroup.valueHaveTax?this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty:this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty+this.UintAndPriceByCUstomer.currentproduct.taxGroup.value/100*(this.UintAndPriceByCUstomer.valuePrice*this.UintAndPriceByCUstomer.valueQuantaty)).toFixed(2)},i=this.tableItems.findIndex((function(e){return e.productid===t.UintAndPriceByCUstomer.currentproduct.id&&e.uintid===t.UintAndPriceByCUstomer.valueUint.fk_Uint}));-1!==i?this.tableItems.splice(i,1,e):this.tableItems.push(e),this.editModalProductPrice=!1,this.createModalProductPrice=!1,this.stopBtn=!1,this.UintAndPriceByCUstomer.valueUint="",this.UintAndPriceByCUstomer.currentproduct="",this.UintAndPriceByCUstomer.valuePrice=0,this.UintAndPriceByCUstomer.valueQuantaty=1},cancleEditfunProductPrice:function(){this.editModalProductPrice=!1,Object.assign(this.currentobject,this.opjectBeforeEdit),this.currentobject={},this.createModalProductPrice=!1,this.UintAndPriceByCUstomer.valueUint="",this.UintAndPriceByCUstomer.currentproduct="",this.UintAndPriceByCUstomer.valuePrice=0,this.UintAndPriceByCUstomer.valueQuantaty=1},showsubmitModdal:function(){this.tableItems.length>=1?(this.modelTitle="generic.finishBill",this.modelOktext="modal.ok",this.submitModdal=!0,this.ApiRequest.inv_dueDate=f["a"].todayDate()):this.showToast(this.$t("generic.emptyBil"),{icon:"fa-exclamation",position:"bottom-right",duration:1500,type:"error"})},okSubmitfun:function(){var t=this;this.stopBtn=!0,this.ApiRequest.total_Price=this.totalBilTax,this.ApiRequest.total_Tax=this.totalTax,this.ApiRequest.is_Cash=!1,this.ApiRequest.liveStatus="tostock",this.ApiRequest.date=f["a"].todayDate(),this.ApiRequest.fK_Branchs=2,this.ApiRequest.fK_Customers=this.CustomerId,this.ApiRequest.fK_Inv_type=1,this.ApiRequest.fK_Safes=1,this.ApiRequest.fK_Inv_PayType=1,this.ApiRequest.fK_Pay_Type=1,this.ApiRequest.fK_Employees=1,this.tableItems.forEach((function(e){var i={quantity:e.qu,price:e.price,tax:100*e.taxValue,fK_Products:e.productid,fK_Stock:e.stockid,fK_Units:e.uintid};console.log(e),t.ApiRequest.inv_Subs.push(i)})),console.log(this.ApiRequest),v.create(this.ApiRequest).then((function(e){t.ApiRequest={inv_Subs:[]},t.submitModdal=!1,t.countDownModdal=!0,t.invId=null!==e.data.inv_id?e.data.inv_id:"----",setInterval((function(){t.countDown-=1}),1e3),setTimeout((function(){location.reload()}),3e3)}),(function(e){console.error(e),t.loading=!1,t.stopBtn=!1,t.submitModdal=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-right",duration:1500,type:"error"})}))},canclesubmitfun:function(){this.submitModdal=!1,this.ApiRequest={}}}},x=U,b=(i("d515"),i("2877")),B=Object(b["a"])(x,s,n,!1,null,null,null),g=B.exports,_=i("fadf"),A={name:"invoicesBuy",components:{invoicesBuyTable:g},data:function(){return{showInv:!1,stopBtn:!1,fKCustomer:{valueName:"",valuePhone:"",options:[]},currentCustomer:""}},created:function(){this.getCustomer()},methods:{getCustomer:function(){var t=this,e={Customer_type:1};_["a"].getAll(e).then((function(e){t.fKCustomer.options=e.data}),(function(e){console.error(e),t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-right",duration:1500,type:"error"})}))},okCreatefun:function(){this.stopBtn=!0,null!==this.fKCustomer.valueName&&void 0!==this.fKCustomer.valueName&&""!==this.fKCustomer.valueName||null!==this.fKCustomer.valuePhone&&void 0!==this.fKCustomer.valuePhone&&""!==this.fKCustomer.valuePhone?null!==this.fKCustomer.valueName&&void 0!==this.fKCustomer.valueName&&""!==this.fKCustomer.valueName?(this.currentCustomer=this.fKCustomer.valueName.id,this.showInv=!this.showInv):(this.currentCustomer=this.fKCustomer.valuePhone.id,this.showInv=!this.showInv):(this.stopBtn=!1,this.showToast(this.$t("generic.errorChooseCustomer"),{icon:"fa-exclamation",position:"bottom-right",duration:1500,type:"error"}))}}},k=A,w=(i("57c6"),Object(b["a"])(k,r,a,!1,null,null,null));e["default"]=w.exports},"57c6":function(t,e,i){"use strict";var r=i("d4ed"),a=i.n(r);a.a},"646b":function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var n=function(){function t(){r(this,t)}return s(t,[{key:"riquierdvalidation",value:function(t){return null==t||""===t}},{key:"numircvalidation",value:function(t){return!!isNaN(t)||(isNaN(t),!1)}},{key:"numircriquierdvalidation",value:function(t){return!!isNaN(t)||!(!isNaN(t)&&null!=t&&""!==t)}},{key:"validateEmail",value:function(t){var e=/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!e.test(t)}},{key:"validatePhone",value:function(t){var e=/^[\\+]?[(]?[0-9]{3}[)]?[-\s\\.]?[0-9]{3}[-\s\\.]?[0-9]{4,6}$/im;return!e.test(t)}},{key:"todayDate",value:function(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();return e}},{key:"formatDate",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var i={weekday:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};return new Date(t).toLocaleDateString("en-GB",i)}var r={year:"numeric",month:"numeric",day:"numeric"};return new Date(t).toLocaleDateString("en-GB",r)}}]),t}();e["a"]=new n},c427:function(t,e,i){"use strict";var r=i("bc3a"),a=i.n(r);e["a"]=a.a.create({baseURL:"https://localhost:44347/api/v1/",headers:{"Content-type":"application/json"}})},d4ed:function(t,e,i){},d515:function(t,e,i){"use strict";var r=i("002b"),a=i.n(r);a.a},fadf:function(t,e,i){"use strict";var r=i("c427");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}var o=function(){function t(){a(this,t)}return n(t,[{key:"getAll",value:function(t){return r["a"].get("Customers",{params:t})}},{key:"getAllPagnation",value:function(t){return r["a"].get("CustomersPaging",{params:t})}},{key:"get",value:function(t){return r["a"].get("Customers?Id=".concat(t))}},{key:"create",value:function(t){return r["a"].post("Customers",t)}},{key:"update",value:function(t,e){return r["a"].put("Customers?Id=".concat(t),e)}},{key:"delete",value:function(t){return r["a"].delete("Customers?Id=".concat(t))}}]),t}();e["a"]=new o}}]);
//# sourceMappingURL=chunk-64cd9e2c.ea895fc3.js.map