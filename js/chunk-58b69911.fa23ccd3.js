(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58b69911"],{1577:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contanier"},[t.showStatment?n("div",{staticClass:"row"},[n("StockTransaction-Table",{staticClass:"flex md12 sm12 xs12",attrs:{StockId:t.StockId}})],1):t._e(),t.showStatment?t._e():n("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[n("va-card",{staticClass:"flex md8 sm12 xs12",attrs:{title:t.$t("tables.labelStockloadingParent")}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.okCreatefun()}}},[n("div",{staticClass:"row flex-center"},[n("div",{staticClass:"flex md4 sm12 xs12 px-1"},[n("va-select",{attrs:{label:t.$t("placeholder.StockName"),required:"",searchable:"",textBy:"name",keyBy:"id",options:t.fKStocsk.options},model:{value:t.fKStocsk.value,callback:function(e){t.$set(t.fKStocsk,"value",e)},expression:"fKStocsk.value"}})],1)]),n("div",{staticClass:"d-flex justify--center mt-3"},[n("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t("modal.ok"))+" ")])],1)])])],1)])},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("va-card",{staticClass:"w-100",attrs:{title:t.$t("tables.labelStockloading")+" "+t.StockId.name}},[n("div",{staticClass:"row"},[n("div",{staticClass:"flex md12 sm12"},[n("va-data-table",{attrs:{fields:t.fields,data:t.dataTable,loading:t.loading,totalPages:t.totalPages,"api-mode":"",hoverable:""},on:{"page-selected":t.readItems},scopedSlots:t._u([{key:"marker",fn:function(e){return[t._v(" "+t._s(e.rowIndex+1+10*(t.pageNumber-1))+" ")]}},{key:"inv",fn:function(e){return[t._v(" "+t._s(null===e.rowData.inv?"---":e.rowData.inv.name)+" ")]}},{key:"status",fn:function(e){return[e.rowData.is_Continue?n("va-badge",{attrs:{color:"info"}},[t._v(" "+t._s(t.$t("tables.is_Continue"))+" ")]):e.rowData.is_Finish&&e.rowData.is_Seen&&null!==e.rowData.delivery?n("va-badge",{attrs:{color:"secondary"}},[t._v(" "+t._s(t.$t("tables.is_Shiped"))+" ")]):e.rowData.is_Finish&&e.rowData.is_Seen?n("va-badge",{attrs:{color:"success"}},[t._v(" "+t._s(t.$t("tables.is_finshed"))+" ")]):e.rowData.is_Seen&&e.rowData.is_Pending?n("va-badge",{attrs:{color:"info"}},[t._v(" "+t._s(t.$t("tables.is_Pending"))+" ")]):e.rowData.is_Seen?n("va-badge",{attrs:{color:"warning"}},[t._v(" "+t._s(t.$t("tables.is_SeenONly"))+" ")]):e.rowData.is_Finish||e.rowData.is_Seen?t._e():n("va-badge",{attrs:{color:"danger"}},[t._v(" "+t._s(t.$t("tables.is_SeenAndIsfinish"))+" ")])]}},{key:"quantity",fn:function(e){return[t._v(" "+t._s(e.rowData.tr_Stock_Subs.length)+" ")]}},{key:"actions",fn:function(e){return[n("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"dark",disabled:e.rowData.is_Finish&&e.rowData.is_Seen&&null!==e.rowData.delivery},on:{click:function(n){return t.showEditModal(e.rowData)}}},[t._v(" "+t._s(t.$t("tables.loadingShipment"))+" ")])]}}])}),n("va-modal",{attrs:{"no-outside-dismiss":"",size:"large",title:t.$t(t.modelTitle),"hide-default-actions":""},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[n("va-data-table",{attrs:{fields:t.checkFildes,data:t.tr_Stock_Subs,hoverable:""},scopedSlots:t._u([{key:"select",fn:function(e){return[n("va-checkbox",{attrs:{value:e.rowData.is_checked},on:{input:function(n){return t.selectProduct(e.rowIndex)}}})]}},{key:"product",fn:function(e){return[t._v(" "+t._s(e.rowData.products.name)+" ")]}},{key:"units",fn:function(e){return[t._v(" "+t._s(e.rowData.units.name)+" ")]}},{key:"stock",fn:function(e){return[t._v(" "+t._s(e.rowData.stock.name)+" ")]}}])}),n("div",{staticClass:"row pt-3",staticStyle:{"justify-content":"center"}},[n("va-button",{attrs:{color:"success"},on:{click:function(e){return t.okEditfun()}}},[t._v(" "+t._s(t.$t("tables.finished")))]),n("va-button",{attrs:{color:"info"},on:{click:function(e){return t.pendingEditfun()}}},[t._v(" "+t._s(t.$t("tables.pending")))]),n("va-button",{attrs:{color:"danger"},on:{click:function(e){return t.cancleEditfun()}}},[t._v(" "+t._s(t.$t("tables.cancel")))])],1)],1),n("va-modal",{attrs:{"no-outside-dismiss":"",size:"large",title:t.$t(t.modelTitle),"hide-default-actions":""},model:{value:t.deliveryModal,callback:function(e){t.deliveryModal=e},expression:"deliveryModal"}},[n("div",{staticClass:"row"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.okdeliveryfun()}}},[n("div",{staticClass:"flex md12 sm12 xs12"},[n("va-select",{attrs:{label:t.$t("placeholder.delivery"),searchable:"",textBy:"name",keyBy:"id",options:t.delivery.options},model:{value:t.delivery.value,callback:function(e){t.$set(t.delivery,"value",e)},expression:"delivery.value"}})],1),n("div",{staticClass:"d-flex justify--center mt-3"},[n("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(e){return t.cancledeliveryfun()}}},[t._v(" "+t._s(t.$t("modal.cancel"))+" ")]),n("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t("modal.ship")))])],1)])])])],1)])])},s=[],r=n("966e"),c=n("9c0c"),l={props:{StockId:{}},data:function(){return{modelTitle:"",modelOktext:"",stopBtn:!1,is_view:!1,perPage:10,totalPages:0,dataTable:[],tr_Stock_Subs:[],editModal:!1,deliveryModal:!1,loading:!0,is_seen:!1,opjectBeforeEdit:{},delivery:{value:"",options:[]}}},computed:{fields:function(){return[{name:"__slot:marker",width:"30px",title:"#"},{name:"__slot:inv",title:this.$t("tables.headings.inv_id"),dataClass:"text-center"},{name:"__slot:status",title:this.$t("tables.headings.status")},{name:"__slot:quantity",title:this.$t("tables.headings.quantity")},{name:"__slot:actions",dataClass:"text-right"}]},checkFildes:function(){return[{name:"__slot:select",width:"30px",dataClass:"text-center",title:"#"},{name:"__slot:product",title:this.$t("tables.headings.product")},{name:"quantity",title:this.$t("tables.headings.quantity")},{name:"__slot:units",title:this.$t("tables.headings.units")},{name:"__slot:stock",title:this.$t("tables.headings.stock")}]}},created:function(){this.readItems(),this.getdelivery()},methods:{selectProduct:function(t){this.currentobject.tr_Stock_Subs[t].is_checked=!this.currentobject.tr_Stock_Subs[t].is_checked},sortCallBack:function(t){this.readItems(1,t[0].toString().charAt(0).toUpperCase()+t[0].toString().slice(1))},readItems:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.pageNumber=e,this.loading=!0,console.log("fkghg");var a={PageSize:this.perPage,PageNumber:e,OrderBy:n};r["a"].getAllPagnation(a).then((function(e){console.log(e),t.dataTable=e.data;var n=JSON.parse(e.headers["x-pagination"]);t.totalPages=n.TotalPages,t.loading=!1}),(function(e){console.error(e),t.loading=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))},getdelivery:function(){var t=this,e={Is_Delivery:!0};c["a"].getAllPagnation(e).then((function(e){t.delivery.options=e.data}),(function(e){console.error(e),t.loading=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))},edit:function(t,e){var n=this;r["a"].isFinishToDelivery(t,e).then((function(t){"true"===t.headers["x-status"]?(n.readItems(),n.currentobject={},n.loading=!1,n.stopBtn=!1,n.is_seen||(n.is_seen=!0,n.editModal=!1,n.showToast(n.$t("generic.done"),{icon:"fa-check",position:"bottom-center",duration:2500,type:"success"}))):(n.loading=!1,n.stopBtn=!1,n.editModal=!1,n.showToast(n.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"}))}),(function(t){console.error(t),n.loading=!1,n.stopBtn=!1,n.showToast(n.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))},seen:function(){var t=this,e={Fk_Tr_Stock:this.currentobject.id,FK_Employees:1};r["a"].Seen(e).then((function(e){"true"===e.headers["x-status"]||(t.loading=!1,t.stopBtn=!1,t.editModal=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"}))}),(function(e){console.error(e),t.loading=!1,t.stopBtn=!1,t.editModal=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))},showEditModal:function(t){this.tr_Stock_Subs=t.tr_Stock_Subs,this.editModal=!0,this.modelTitle="generic.editItemTitle",this.modelOktext="modal.edit",t.is_Seen||(t.is_Seen=!0),this.opjectBeforeEdit=Object.assign({},t),this.currentobject=t,this.seen()},okEditfun:function(){this.editModal=!1,this.deliveryModal=!0},pendingEditfun:function(){var t=this,e={Fk_Tr_Stock:this.currentobject.id,Is_Finish:!1},n=[];this.currentobject.tr_Stock_Subs.forEach((function(e){e.is_checked&&n.push({id_Tr_Stock:e.id,quantity:e.quantity,fK_Stock:t.StockId.id})}));var a={is_Continue:!1,tr_Stock_Subs:n};this.edit(e,a),this.editModal=!1},cancleEditfun:function(){this.editModal=!1,this.loading=!1,this.stopBtn=!1,Object.assign(this.currentobject,this.opjectBeforeEdit)},okdeliveryfun:function(){var t=this;if(this.stopBtn=!0,""!==this.delivery.value){var e,n=!1,a=[];this.currentobject.tr_Stock_Subs.forEach((function(e){e.is_checked?a.push({id_Tr_Stock:e.id,quantity:e.quantity,fK_Stock:t.StockId.id}):n=!0})),e=n?{Fk_Tr_Stock:this.currentobject.id,Is_Finish:!1,FK_Delivery:this.delivery.value.id}:{Fk_Tr_Stock:this.currentobject.id,Is_Finish:!0,FK_Delivery:this.delivery.value.id};var o={is_Continue:n,tr_Stock_Subs:a};this.edit(e,o),this.stopBtn=!1,this.loading=!1,this.deliveryModal=!1}else this.stopBtn=!1,this.loading=!1,this.stopBtn=!1,this.loading=!1,this.deliveryModal=!1,this.showToast(this.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})},cancledeliveryfun:function(){this.stopBtn=!1,this.loading=!1,this.deliveryModal=!1}}},u=l,d=(n("7186"),n("2877")),f=Object(d["a"])(u,i,s,!1,null,null,null),h=f.exports,v=n("75b5"),_={name:"StockTransaction",components:{StockTransactionTable:h},data:function(){return{fKStocsk:{value:"",options:[]},StockId:0,showStatment:!1,stopBtn:!1}},created:function(){this.getStock()},methods:{getStock:function(){var t=this;v["a"].getAll().then((function(e){t.fKStocsk.options=e.data}),(function(e){console.error(e),t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))},okCreatefun:function(){this.stopBtn=!0,null!==this.fKStocsk.value&&void 0!==this.fKStocsk.value&&""!==this.fKStocsk.value?(this.StockId=this.fKStocsk.value,this.showStatment=!this.showStatment):(this.stopBtn=!1,this.showToast(this.$t("generic.errorChooseStock"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"}))}}},p=_,k=(n("d0a7"),Object(d["a"])(p,a,o,!1,null,null,null));e["default"]=k.exports},"68c5":function(t,e,n){},7186:function(t,e,n){"use strict";var a=n("68c5"),o=n.n(a);o.a},"75b5":function(t,e,n){"use strict";var a=n("c427");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var r=function(){function t(){o(this,t)}return s(t,[{key:"getAll",value:function(){return a["a"].get("Stock")}},{key:"getAllPagnation",value:function(t){return a["a"].get("Stock",{params:t})}},{key:"get",value:function(t){return a["a"].get("Stock?Id=".concat(t))}},{key:"search",value:function(t){return a["a"].get("Stock/Search",{params:t})}},{key:"create",value:function(t){return a["a"].post("Stock",t)}},{key:"update",value:function(t,e){return a["a"].put("Stock?Id=".concat(t),e)}},{key:"delete",value:function(t){return a["a"].delete("Stock?Id=".concat(t))}}]),t}();e["a"]=new r},"966e":function(t,e,n){"use strict";var a=n("c427");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var r=function(){function t(){o(this,t)}return s(t,[{key:"getAll",value:function(){return a["a"].get("Tr_Stock")}},{key:"getAllPagnation",value:function(t){return a["a"].get("Tr_Stock",{params:t})}},{key:"Seen",value:function(t){return a["a"].post("Tr_Stock/Seen",null,{params:t})}},{key:"isFinishToDelivery",value:function(t,e){return a["a"].put("Tr_Stock/IsFinishToDelivery",e,{params:t})}},{key:"get",value:function(t){return a["a"].get("Tr_Stock/getById?Id=".concat(t))}},{key:"create",value:function(t){return a["a"].post("Tr_Stock",t)}},{key:"search",value:function(t){return a["a"].get("Tr_Stock/Search",{params:t})}},{key:"update",value:function(t,e){return a["a"].put("Tr_Stock?Id=".concat(t),e)}},{key:"delete",value:function(t){return a["a"].delete("Tr_Stock?Id=".concat(t))}}]),t}();e["a"]=new r},"9c0c":function(t,e,n){"use strict";var a=n("c427");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var r=function(){function t(){o(this,t)}return s(t,[{key:"getAll",value:function(){return a["a"].get("Employees")}},{key:"getAllPagnation",value:function(t){return a["a"].get("Employees",{params:t})}},{key:"get",value:function(t){return a["a"].get("Employees/getById?Id=".concat(t))}},{key:"search",value:function(t){return a["a"].get("Employees/Search",{params:t})}},{key:"create",value:function(t){return a["a"].post("Employees",t)}},{key:"update",value:function(t,e){return a["a"].put("Employees?Id=".concat(t),e)}},{key:"delete",value:function(t){return a["a"].delete("Employees?Id=".concat(t))}}]),t}();e["a"]=new r},c427:function(t,e,n){"use strict";var a=n("bc3a"),o=n.n(a);e["a"]=o.a.create({baseURL:"https://yellow-sun.net/api/v1/",headers:{"Content-type":"application/json"}})},d0a7:function(t,e,n){"use strict";var a=n("e7e0"),o=n.n(a);o.a},e7e0:function(t,e,n){}}]);
//# sourceMappingURL=chunk-58b69911.fa23ccd3.js.map