(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4af72fb0"],{"68db":function(t,e,i){},"85bd":function(t,e,i){"use strict";var n=i("68db"),s=i.n(n);s.a},bf4d:function(t,e,i){"use strict";var n=i("e75a"),s=i.n(n);s.a},c427:function(t,e,i){"use strict";var n=i("bc3a"),s=i.n(n);e["a"]=s.a.create({baseURL:"https://yellow-sun.net/api/v1/",headers:{"Content-type":"application/json"}})},d305:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contanier"},[t.loading?i("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[i("div",{staticClass:"flex-center spinner-box"},[i("SpringSpinner",{attrs:{"animation-duration":1500,color:this.$themes.primary,size:80}})],1)]):t._e(),t.showInv?i("div",{staticClass:"row"},[i("invoicesRBuy-Table",{staticClass:"flex md12 sm12 xs12",attrs:{bill:t.bill}})],1):t._e(),t.showInv||t.loading?t._e():i("div",{staticClass:"row",staticStyle:{"justify-content":"center"}},[i("va-card",{staticClass:"flex md8 sm12 xs12",attrs:{title:t.$t("tables.labelinvoicesRBuy")}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.okCreatefun()}}},[i("div",{staticClass:"row flex-center"},[i("div",{staticClass:"flex md4 sm12 xs12 px-1"},[i("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.invid_Bill"))+" ")]),i("va-input",{attrs:{placeholder:t.$t("placeholder.invid_Bill"),required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.okCreatefun(e)}},model:{value:t.invid_Bill,callback:function(e){t.invid_Bill=e},expression:"invid_Bill"}})],1)]),i("div",{staticClass:"d-flex justify--center mt-3"},[i("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t("modal.ok"))+" ")])],1)])])],1)])},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("va-card",{attrs:{title:t.$t("tables.labelinvoicesRSelllist")+t.bill.inv_id}},[i("va-button",{staticClass:"mr-0",attrs:{slot:"actions",icon:"fa fa-plus",flat:"",disabled:t.stopBtn},on:{click:function(e){return t.showCreateModal()}},slot:"actions"},[t._v(" "+t._s(t.$t("buttons.createRINv"))+" ")]),i("va-data-table",{attrs:{fields:t.fields,data:t.bill.inv_Subs,"api-mode":"",hoverable:""},scopedSlots:t._u([{key:"marker",fn:function(e){return[t._v(" "+t._s(e.rowIndex+1)+" ")]}},{key:"products",fn:function(e){return[t._v(" "+t._s(null===e.rowData.products?"----":e.rowData.products.name)+" ")]}},{key:"actions",fn:function(e){return[i("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"danger"},on:{click:function(i){return t.showDeleteModal(e.rowIndex)}}},[t._v(" "+t._s(t.$t("tables.delete"))+" ")])]}}])}),i("va-modal",{attrs:{"no-outside-dismiss":"",title:t.$t("generic.invrsell"),okText:t.$t("modal.return"),cancelText:t.$t("modal.cancel"),message:t.$t("generic.invrsellMsg")},on:{ok:function(e){return t.okCreatefun()},cancel:function(e){return t.cancleCreatefun()}},model:{value:t.createModal,callback:function(e){t.createModal=e},expression:"createModal"}}),i("va-modal",{attrs:{"no-outside-dismiss":"",title:t.$t(t.modelTitle),"hide-default-actions":""},model:{value:t.deleteModal,callback:function(e){t.deleteModal=e},expression:"deleteModal"}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.okDeletefun()}}},[i("div",{staticClass:"row flex-center"},[i("div",{staticClass:"flex md12 sm12 xs12 px-1"},[i("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.quantity"))+" ")]),i("va-input",{attrs:{type:"number",min:"0",max:t.maxNum,placeholder:t.$t("placeholder.quantity"),required:""},model:{value:t.currentobject.quantity,callback:function(e){t.$set(t.currentobject,"quantity",e)},expression:"currentobject.quantity"}})],1)]),i("div",{staticClass:"d-flex justify--center mt-3"},[i("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(e){return t.cancleDeletefun()}}},[t._v(" "+t._s(t.$t("modal.cancel"))+" ")]),i("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t(t.modelOktext)))])],1)])])],1)},l=[],o=i("fe5e"),r={data:function(){return{modelTitle:"",modelOktext:"",stopBtn:!1,deleteModal:!1,createModal:!1,currentindex:Number,opjectBeforeEdit:"",currentobject:{},maxNum:0,ApiRequest:{inv_Subs:[]}}},props:{bill:{}},computed:{fields:function(){return[{name:"__slot:marker",width:"30px",dataClass:"text-center",title:"#"},{name:"__slot:products",title:this.$t("tables.headings.name")},{name:"quantity",title:this.$t("tables.headings.quantity")},{name:"__slot:actions",dataClass:"text-right"}]}},methods:{create:function(){var t=this;this.ApiRequest.total_Price=this.bill.total_Price,this.ApiRequest.is_Cash=this.bill.is_Cash,this.ApiRequest.is_Deliverd=this.bill.is_Deliverd,this.ApiRequest.inv_dueDate=this.bill.inv_dueDate,this.ApiRequest.date=this.bill.date,this.ApiRequest.inv_ReturnId=this.bill.inv_id,this.ApiRequest.paid=this.bill.paid,this.ApiRequest.tax=this.bill.tax,this.ApiRequest.iS_Paid=this.bill.iS_Paid,this.ApiRequest.iS_Deleted=this.bill.iS_Deleted,this.ApiRequest.notes=this.bill.notes,this.ApiRequest.disscountPercentage=this.bill.disscountPercentage,this.ApiRequest.liveStatus=this.bill.liveStatus,this.ApiRequest.fK_Branchs=this.bill.branchs.id,this.ApiRequest.fK_Customers=this.bill.customers.id,this.ApiRequest.fK_Inv_type=4,this.ApiRequest.fK_Safes=this.bill.safes.id,this.ApiRequest.fK_Inv_PayType=this.bill.inv_PayType.id,this.ApiRequest.fK_Employees=this.bill.employees.id,this.ApiRequest.fK_Pay_Type=this.bill.pay_Type.id,this.ApiRequest.fK_Pay_Type=this.bill.pay_Type.id,this.bill.inv_Subs.forEach((function(e){var i={quantity:e.quantity,price:e.price,tax:e.tax,disscountPercentage:e.disscountPercentage,fK_Products:e.products.id,fK_Stock:e.stock.id,fK_Units:e.units.id};t.ApiRequest.inv_Subs.push(i)})),o["a"].create(this.ApiRequest).then((function(e){"true"===e.headers["x-status"]?(location.reload(),t.showToast(t.$t("generic.done"),{icon:"fa-check",position:"bottom-center",duration:2500,type:"success"})):(t.stopBtn=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"}))}),(function(e){console.error(e),t.loading=!1,t.stopBtn=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))},showDeleteModal:function(t){this.modelTitle="generic.returnThisItem",this.modelOktext="modal.confirm",this.deleteModal=!0,this.opjectBeforeEdit=Object.assign({},this.bill.inv_Subs[t]),this.currentobject=this.bill.inv_Subs[t],this.maxNum=this.currentobject.quantity,this.currentindex=t},okDeletefun:function(){this.currentobject.quantity===this.maxNum&&this.bill.inv_Subs.splice(this.currentindex,1),this.deleteModal=!1},cancleDeletefun:function(){Object.assign(this.currentobject,this.opjectBeforeEdit),this.currentobject={},this.deleteModal=!1},showCreateModal:function(){this.createModal=!0},okCreatefun:function(){this.stopBtn=!0,this.create()},cancleCreatefun:function(){this.createModal=!1}}},c=r,u=(i("85bd"),i("2877")),d=Object(u["a"])(c,a,l,!1,null,null,null),f=d.exports,p=i("4583");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){v(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var m={name:"invoicesRBuy",components:b({invoicesRBuyTable:f},p),data:function(){return{showInv:!1,stopBtn:!1,loading:!1,bill:"",invid_Bill:""}},methods:{okCreatefun:function(){var t=this;if(this.stopBtn=!0,this.loading=!0,null!==this.invid_Bill&&void 0!==this.invid_Bill&&""!==this.invid_Bill){var e={Bill_Id:this.invid_Bill,inv_type:2};o["a"].getSearchBill(e).then((function(e){if(0===e.data[0].inv_Subs.length)return t.loading=!1,t.stopBtn=!1,t.showToast(t.$t("generic.thisBillIsEmpty"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"});t.loading=!1,t.stopBtn=!1,t.bill=e.data[0],t.showInv=!t.showInv}),(function(e){console.error(e),t.loading=!1,t.stopBtn=!1,t.showToast(t.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))}else this.stopBtn=!1,this.loading=!1,this.showToast(this.$t("generic.filldata"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}}},y=m,_=(i("bf4d"),Object(u["a"])(y,n,s,!1,null,null,null));e["default"]=_.exports},e75a:function(t,e,i){},fe5e:function(t,e,i){"use strict";var n=i("c427");function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var o=function(){function t(){s(this,t)}return l(t,[{key:"getNewBill",value:function(t,e){return n["a"].get("Bill/GetProductsByCustomer?id=".concat(t,"&Company_Activity=").concat(e))}},{key:"getUintAndPriceByCUstomer",value:function(t,e){return n["a"].get("Bill/GetProductUintAndPrice?productId=".concat(t,"&customerId=").concat(e))}},{key:"getSearchBill",value:function(t){return n["a"].get("GetByInv_billOrDate",{params:t})}},{key:"search",value:function(t){return n["a"].get("Bill/Search",{params:t})}},{key:"getAll",value:function(){return n["a"].get("Bill")}},{key:"getAllPagnation",value:function(t){return n["a"].get("Bill/GetAllPaging",{params:t})}},{key:"getAllForDelivery",value:function(t){return n["a"].get("Bill/GetAllForDelivery",{params:t})}},{key:"get",value:function(t){return n["a"].get("Bill/getById?Id=".concat(t))}},{key:"create",value:function(t){return n["a"].post("Bill",t)}},{key:"update",value:function(t,e){return n["a"].put("Bill?Id=".concat(t),e)}},{key:"delete",value:function(t){return n["a"].delete("Bill?Id=".concat(t))}}]),t}();e["a"]=new o}}]);
//# sourceMappingURL=chunk-4af72fb0.2e76235a.js.map